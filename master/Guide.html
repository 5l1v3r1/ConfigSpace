<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Guide &#8212; ConfigSpace  documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API-Documentation" href="API-Doc.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>
  
    <a href="https://github.com/automl/ConfigSpace"
            class="visible-desktop hidden-xs"><img
	        id="gh-banner"
	     style="position: absolute; top: 50px; right: 0; border: 0;"
          src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
	      alt="Fork me on GitHub"></a>
      <script>
	          // Adjust banner height.
	          $(function () {
			        var navHeight = $(".navbar .container").css("height");
			        $("#gh-banner").css("top", navHeight);
			      });
  </script>
  

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          ConfigSpace</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.9</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
				 
				 
                     <li><a href="quickstart.html">Quickstart</a></li>
                 
				 
                     <li><a href="#">Guide</a></li>
                 
				 
                     <li><a href="API-Doc.html">API</a></li>
                 
            
            
              <!--<li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#basic-usage">Basic Usage</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#st-example-integer-hyperparameters-and-float-hyperparameters">1st Example: Integer hyperparameters and float hyperparameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nd-example-categorical-hyperparameters-and-conditions">2nd Example: Categorical hyperparameters and conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rd-example-forbidden-clauses">3rd Example: Forbidden clauses</a></li>
<li class="toctree-l2"><a class="reference internal" href="#th-example-serialization">4th Example Serialization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="API-Doc.html">API-Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="API-Doc.html#configurationspace">ConfigurationSpace</a></li>
<li class="toctree-l2"><a class="reference internal" href="API-Doc.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="API-Doc.html#hyperparameters">Hyperparameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="API-Doc.html#conditions">Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="API-Doc.html#forbidden-clauses">Forbidden Clauses</a></li>
<li class="toctree-l2"><a class="reference internal" href="API-Doc.html#serialization">Serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="API-Doc.html#utils">Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Examples - ConfigSpace</a><ul>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/AdvancedExample.html">Advanced Example</a></li>
</ul>
</li>
</ul>
</ul>
</li>-->
              
            
            
            
            
            
          </ul>

          
            
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Guide</a><ul>
<li><a class="reference internal" href="#st-example-integer-hyperparameters-and-float-hyperparameters">1st Example: Integer hyperparameters and float hyperparameters</a></li>
<li><a class="reference internal" href="#nd-example-categorical-hyperparameters-and-conditions">2nd Example: Categorical hyperparameters and conditions</a></li>
<li><a class="reference internal" href="#rd-example-forbidden-clauses">3rd Example: Forbidden clauses</a></li>
<li><a class="reference internal" href="#th-example-serialization">4th Example Serialization</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="guide">
<h1>Guide<a class="headerlink" href="#guide" title="Permalink to this headline">¶</a></h1>
<p>In this guide the concepts of using different hyperparameters, applying conditions and forbidden clauses to
a configuration space are captured.</p>
<p>They will be shown by explaining a more detailed example, a configuration space for a support vector machine.</p>
<div class="section" id="st-example-integer-hyperparameters-and-float-hyperparameters">
<h2>1st Example: Integer hyperparameters and float hyperparameters<a class="headerlink" href="#st-example-integer-hyperparameters-and-float-hyperparameters" title="Permalink to this headline">¶</a></h2>
<p>Assume that we want to train a support vector machine (=SVM) for classification tasks with the hyperparameters:</p>
<ul class="simple">
<li><span class="math notranslate nohighlight">\(\mathcal{C}\)</span>: regularization constant  with <span class="math notranslate nohighlight">\(\mathcal{C} \in \mathbb{R}_{\geq 0}\)</span> and 0 <span class="math notranslate nohighlight">\(\geq \mathcal{C} \geq\)</span> 1</li>
<li><code class="docutils literal notranslate"><span class="pre">max_iter</span></code>: the maximum number of iterations within the solver</li>
</ul>
<p>The implementation of the classifier is out of scope for this example and thus not shown.
But for further reading about
support vector machines and the meaning of its hyperparameter, take a look
<a class="reference external" href="https://en.wikipedia.org/wiki/Support_vector_machine">here</a>.
Or directly in the implementation of the SVM in
<a class="reference external" href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC">scikit-learn</a>.</p>
<p>The first step is always to create a <a class="reference internal" href="API-Doc.html#ConfigSpace.configuration_space.ConfigurationSpace" title="ConfigSpace.configuration_space.ConfigurationSpace"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSpace</span></code></a> object. All the hyperparameters and constraints will be added to this
object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ConfigSpace</span> <span class="k">as</span> <span class="nn">CS</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">CS</span><span class="o">.</span><span class="n">ConfigurationSpace</span><span class="p">()</span>
</pre></div>
</div>
<p>Now, we have to define the hyperparameters <span class="math notranslate nohighlight">\(\mathcal{C}\)</span> and <code class="docutils literal notranslate"><span class="pre">max_iter</span></code>. We choose <span class="math notranslate nohighlight">\(\mathcal{C}\)</span> to be a float and
<code class="docutils literal notranslate"><span class="pre">max_iter</span></code> to be an <a class="reference internal" href="API-Doc.html#ConfigSpace.hyperparameters.UniformIntegerHyperparameter" title="ConfigSpace.hyperparameters.UniformIntegerHyperparameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformIntegerHyperparameter</span></code></a> .</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ConfigSpace.hyperparameters</span> <span class="k">as</span> <span class="nn">CSH</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">UniformFloatHyperparameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">max_iter</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">UniformIntegerHyperparameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;max_iter&#39;</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>As last step in this example, we need to add them to the <a class="reference internal" href="API-Doc.html#ConfigSpace.configuration_space.ConfigurationSpace" title="ConfigSpace.configuration_space.ConfigurationSpace"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSpace</span></code></a> and sample a configuration from it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cs</span><span class="o">.</span><span class="n">add_hyperparameter</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">add_hyperparameter</span><span class="p">(</span><span class="n">max_iter</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">sample_configuration</span><span class="p">()</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="API-Doc.html#ConfigSpace.configuration_space.ConfigurationSpace" title="ConfigSpace.configuration_space.ConfigurationSpace"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSpace</span></code></a> object <em>cs</em> stores now the hyperparameters <span class="math notranslate nohighlight">\(\mathcal{C}\)</span> and <code class="docutils literal notranslate"><span class="pre">max_iter</span></code> with their defined value-ranges.</p>
</div>
<div class="section" id="nd-example-categorical-hyperparameters-and-conditions">
<h2>2nd Example: Categorical hyperparameters and conditions<a class="headerlink" href="#nd-example-categorical-hyperparameters-and-conditions" title="Permalink to this headline">¶</a></h2>
<p>The support vector machine from the sklearn implementation supports different kinds of kernels, such as a an RBF or a polynomial kernel.
We want to include them in our configuration space.
This is a new hyperparameter with a finite number of values.
For this scenario, ConfigSpace offers the <a class="reference internal" href="API-Doc.html#ConfigSpace.hyperparameters.CategoricalHyperparameter" title="ConfigSpace.hyperparameters.CategoricalHyperparameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalHyperparameter</span></code></a>.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">kernel_type</span></code>: with values ‘linear’, ‘poly’, ‘rbf’, ‘sigmoid’.</li>
</ul>
<p>If we take a closer look at the possible values of <code class="docutils literal notranslate"><span class="pre">kernel_type</span></code>, we observe, that the kernel type ‘poly’ has an additional,
unique hyperparameter, the degree of the polynomial kernel function. There is also a hyperparameter <code class="docutils literal notranslate"><span class="pre">coef0</span></code> for the kernel
types ‘poly’ and ‘sigmoid’, as well as <code class="docutils literal notranslate"><span class="pre">gamma</span></code> for ‘rbf’, ‘poly’ and ‘sigmoid’</p>
<p>– <code class="docutils literal notranslate"><span class="pre">degree</span></code>: <span class="math notranslate nohighlight">\(\in \mathbb{N}\)</span> - degree of polynomial kernel function.
– <code class="docutils literal notranslate"><span class="pre">coef0</span></code>: Independent term in kernel function. It is only significant in ‘poly’ and ‘sigmoid’.
– <code class="docutils literal notranslate"><span class="pre">gamma</span></code>: Kernel coefficient for ‘rbf’, ‘poly’ and ‘sigmoid’.</p>
<p>To realize this example, we use <a class="reference internal" href="API-Doc.html#conditions"><span class="std std-ref">Conditions</span></a>.</p>
<p>Even in simple examples the configuration space grows easily very fast and
with it the number of possible configurations.
It makes sense to limit the search space for hyperparameter optimizations in order to quickly find good configurations.
For conditional hyperparameters (= hyperparameters, which are part of a condition), ConfigSpace achieves this by sampling those
hyperparameters from the defined configuration space only if their condition is met.</p>
<p>To add conditions on hyperparameters to the configuration space, we first have to insert the new hyperparameters in the <code class="docutils literal notranslate"><span class="pre">ConfigSpace</span></code>
and in a second step the conditions on them.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kernel_type</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">CategoricalHyperparameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;kernel_type&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="s1">&#39;poly&#39;</span><span class="p">,</span> <span class="s1">&#39;rbf&#39;</span><span class="p">,</span> <span class="s1">&#39;sigmoid&#39;</span><span class="p">])</span>
<span class="n">degree</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">UniformIntegerHyperparameter</span><span class="p">(</span><span class="s1">&#39;degree&#39;</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">coef0</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">UniformFloatHyperparameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;coef0&#39;</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">gamma</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">UniformFloatHyperparameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;gamma&#39;</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">cs</span><span class="o">.</span><span class="n">add_hyperparameters</span><span class="p">([</span><span class="n">kernel_type</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">coef0</span><span class="p">,</span> <span class="n">gamma</span><span class="p">])</span>
</pre></div>
</div>
<p>Now, we define the conditions. Conditions work by constraining a child hyperparameter (the first argument) on its parent hyperparameter (the second argument)
being in a certain relation to a value (the third argument).
So <code class="docutils literal notranslate"><span class="pre">CS.EqualsCondition(degree,</span> <span class="pre">kernel_type,</span> <span class="pre">'poly')</span></code> expresses that <code class="docutils literal notranslate"><span class="pre">degree</span></code> is constrained on <code class="docutils literal notranslate"><span class="pre">kernel_type</span></code> being equal to the value <code class="docutils literal notranslate"><span class="pre">'poly'</span></code>.
To express constraints involving multiple parameters or values we can use conjunctions. For example <code class="docutils literal notranslate"><span class="pre">cond_2</span></code> in the
following example expresses the fact, that <code class="docutils literal notranslate"><span class="pre">coef0</span></code> is a valid hyperparameter, if <code class="docutils literal notranslate"><span class="pre">kernel_type</span></code> either has the value
<code class="docutils literal notranslate"><span class="pre">'poly'</span></code> or <code class="docutils literal notranslate"><span class="pre">'sigmoid'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cond_1</span> <span class="o">=</span> <span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">degree</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;poly&#39;</span><span class="p">)</span>

<span class="n">cond_2</span> <span class="o">=</span> <span class="n">CS</span><span class="o">.</span><span class="n">OrConjunction</span><span class="p">(</span><span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">coef0</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;poly&#39;</span><span class="p">),</span>
                          <span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">coef0</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;sigmoid&#39;</span><span class="p">))</span>

<span class="n">cond_3</span> <span class="o">=</span> <span class="n">CS</span><span class="o">.</span><span class="n">OrConjunction</span><span class="p">(</span><span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">gamma</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;rbf&#39;</span><span class="p">),</span>
                          <span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">gamma</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;poly&#39;</span><span class="p">),</span>
                          <span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">gamma</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;sigmoid&#39;</span><span class="p">))</span>

<span class="c1"># Add it to the configuration space</span>
<span class="n">cs</span><span class="o">.</span><span class="n">add_conditions</span><span class="p">([</span><span class="n">cond_1</span><span class="p">,</span> <span class="n">cond_2</span><span class="p">,</span> <span class="n">cond_3</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ConfigSpace offers a lot of different condition types. For example the <a class="reference internal" href="API-Doc.html#ConfigSpace.conditions.NotEqualsCondition" title="ConfigSpace.conditions.NotEqualsCondition"><code class="xref py py-class docutils literal notranslate"><span class="pre">NotEqualsCondition</span></code></a> ,
<a class="reference internal" href="API-Doc.html#ConfigSpace.conditions.LessThanCondition" title="ConfigSpace.conditions.LessThanCondition"><code class="xref py py-class docutils literal notranslate"><span class="pre">LessThanCondition</span></code></a>, or <a class="reference internal" href="API-Doc.html#ConfigSpace.conditions.GreaterThanCondition" title="ConfigSpace.conditions.GreaterThanCondition"><code class="xref py py-class docutils literal notranslate"><span class="pre">GreaterThanCondition</span></code></a>.
To read more about conditions, please take a look at the <a class="reference internal" href="API-Doc.html#conditions"><span class="std std-ref">Conditions</span></a> or the <a class="reference internal" href="auto_examples/AdvancedExample.html"><span class="doc">Advanced Example</span></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Don’t use either the <a class="reference internal" href="API-Doc.html#ConfigSpace.conditions.EqualsCondition" title="ConfigSpace.conditions.EqualsCondition"><code class="xref py py-class docutils literal notranslate"><span class="pre">EqualsCondition</span></code></a> or the <a class="reference internal" href="API-Doc.html#ConfigSpace.conditions.InCondition" title="ConfigSpace.conditions.InCondition"><code class="xref py py-class docutils literal notranslate"><span class="pre">InCondition</span></code></a>
on float hyperparameters.
Due to floating-point inaccuracy, it is very unlikely that, for example, the
<a class="reference internal" href="API-Doc.html#ConfigSpace.conditions.EqualsCondition" title="ConfigSpace.conditions.EqualsCondition"><code class="xref py py-class docutils literal notranslate"><span class="pre">EqualsCondition</span></code></a> is evaluated to True.</p>
</div>
</div>
<div class="section" id="rd-example-forbidden-clauses">
<h2>3rd Example: Forbidden clauses<a class="headerlink" href="#rd-example-forbidden-clauses" title="Permalink to this headline">¶</a></h2>
<p>It may occur, that some states in the configuration space are not allowed.
ConfigSpace supports this functionality by offering <a class="reference internal" href="API-Doc.html#forbidden-clauses"><span class="std std-ref">Forbidden Clauses</span></a>.</p>
<p>To demonstrate the usage of <a class="reference internal" href="API-Doc.html#forbidden-clauses"><span class="std std-ref">Forbidden Clauses</span></a>, we assume that if <code class="docutils literal notranslate"><span class="pre">kernel_type</span></code> in the example above is ‘linear’, we use the
<a class="reference external" href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html#sklearn.svm.LinearSVC">LinearSVC</a>
sklearn implementation, which has more flexibility in the choice of penalties and loss functions.
This gives us three new hyperparameters:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">penalty</span></code>: Specifies the norm used in the penalization with values ‘l1’ or ‘l2’</li>
<li><code class="docutils literal notranslate"><span class="pre">loss</span></code>: Specifies the loss function with values ‘hinge’ or ‘squared_hinge’</li>
<li><code class="docutils literal notranslate"><span class="pre">dual</span></code>: Solve the optimization problem either in dual or simple form with values True or False</li>
</ul>
<p>Again, add these 3 new hyperparameters to the configuration space.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">penalty</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">CategoricalHyperparameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;penalty&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="s2">&quot;l2&quot;</span><span class="p">],</span> <span class="n">default_value</span><span class="o">=</span><span class="s2">&quot;l2&quot;</span><span class="p">)</span>
<span class="n">loss</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">CategoricalHyperparameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;loss&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;hinge&quot;</span><span class="p">,</span> <span class="s2">&quot;squared_hinge&quot;</span><span class="p">],</span> <span class="n">default_value</span><span class="o">=</span><span class="s2">&quot;squared_hinge&quot;</span><span class="p">)</span>
<span class="n">dual</span> <span class="o">=</span> <span class="n">CSH</span><span class="o">.</span><span class="n">Constant</span><span class="p">(</span><span class="s2">&quot;dual&quot;</span><span class="p">,</span> <span class="s2">&quot;False&quot;</span><span class="p">)</span>

<span class="n">cs</span><span class="o">.</span><span class="n">add_hyperparameters</span><span class="p">([</span><span class="n">penalty</span><span class="p">,</span> <span class="n">loss</span><span class="p">,</span> <span class="n">dual</span><span class="p">])</span>
</pre></div>
</div>
<p>Define the conditions and add them to the configuration space.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cond_1</span> <span class="o">=</span> <span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">penalty</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">cond_2</span> <span class="o">=</span> <span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="n">cond_3</span> <span class="o">=</span> <span class="n">CS</span><span class="o">.</span><span class="n">EqualsCondition</span><span class="p">(</span><span class="n">dual</span><span class="p">,</span> <span class="n">kernel_type</span><span class="p">,</span> <span class="s1">&#39;linear&#39;</span><span class="p">)</span>

<span class="c1"># Add them to the configuration space</span>
<span class="n">cs</span><span class="o">.</span><span class="n">add_conditions</span><span class="p">([</span><span class="n">cond_1</span><span class="p">,</span> <span class="n">cond_2</span><span class="p">,</span> <span class="n">cond_3</span><span class="p">])</span>
</pre></div>
</div>
<p>Now we want to forbid some combinations in the configurations.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">penalty</span></code> is ‘l1’ and <code class="docutils literal notranslate"><span class="pre">loss</span></code> is ‘hinge’</li>
<li><code class="docutils literal notranslate"><span class="pre">dual</span></code> is False and <code class="docutils literal notranslate"><span class="pre">penalty</span></code> is ‘l2’ and <code class="docutils literal notranslate"><span class="pre">loss</span></code> is ‘hinge’</li>
<li><code class="docutils literal notranslate"><span class="pre">dual</span></code> is False and <code class="docutils literal notranslate"><span class="pre">penalty</span></code> is ‘l1’</li>
</ul>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">penalty_and_loss</span> <span class="o">=</span> <span class="n">ForbiddenAndConjunction</span><span class="p">(</span>
        <span class="n">ForbiddenEqualsClause</span><span class="p">(</span><span class="n">penalty</span><span class="p">,</span> <span class="s2">&quot;l1&quot;</span><span class="p">),</span>
        <span class="n">ForbiddenEqualsClause</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="s2">&quot;hinge&quot;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">constant_penalty_and_loss</span> <span class="o">=</span> <span class="n">ForbiddenAndConjunction</span><span class="p">(</span>
        <span class="n">ForbiddenEqualsClause</span><span class="p">(</span><span class="n">dual</span><span class="p">,</span> <span class="s2">&quot;False&quot;</span><span class="p">),</span>
        <span class="n">ForbiddenEqualsClause</span><span class="p">(</span><span class="n">penalty</span><span class="p">,</span> <span class="s2">&quot;l2&quot;</span><span class="p">),</span>
        <span class="n">ForbiddenEqualsClause</span><span class="p">(</span><span class="n">loss</span><span class="p">,</span> <span class="s2">&quot;hinge&quot;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="n">penalty_and_dual</span> <span class="o">=</span> <span class="n">ForbiddenAndConjunction</span><span class="p">(</span>
        <span class="n">ForbiddenEqualsClause</span><span class="p">(</span><span class="n">dual</span><span class="p">,</span> <span class="s2">&quot;False&quot;</span><span class="p">),</span>
        <span class="n">ForbiddenEqualsClause</span><span class="p">(</span><span class="n">penalty</span><span class="p">,</span> <span class="s2">&quot;l1&quot;</span><span class="p">)</span>
    <span class="p">)</span>

<span class="c1"># Add them to the configuration space</span>
<span class="n">cs</span><span class="o">.</span><span class="n">add_forbidden_clause</span><span class="p">(</span><span class="n">penalty_and_loss</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">add_forbidden_clause</span><span class="p">(</span><span class="n">constant_penalty_and_loss</span><span class="p">)</span>
<span class="n">cs</span><span class="o">.</span><span class="n">add_forbidden_clause</span><span class="p">(</span><span class="n">penalty_and_dual</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="th-example-serialization">
<h2>4th Example Serialization<a class="headerlink" href="#th-example-serialization" title="Permalink to this headline">¶</a></h2>
<p>If you want to use the configuration space in another tool, such as <a class="reference external" href="https://github.com/automl/CAVE">CAVE</a>, it is useful to store it to file.
To serialize the defined <a class="reference internal" href="API-Doc.html#ConfigSpace.configuration_space.ConfigurationSpace" title="ConfigSpace.configuration_space.ConfigurationSpace"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSpace</span></code></a>, we can choose between different output formats, such as
<a class="reference internal" href="API-Doc.html#json"><span class="std std-ref">json</span></a> or <a class="reference internal" href="API-Doc.html#pcs-new"><span class="std std-ref">pcs</span></a>.</p>
<p>In this case, we want to store the <a class="reference internal" href="API-Doc.html#ConfigSpace.configuration_space.ConfigurationSpace" title="ConfigSpace.configuration_space.ConfigurationSpace"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigurationSpace</span></code></a> object as json file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ConfigSpace.read_and_write</span> <span class="k">import</span> <span class="n">json</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;configspace.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cs</span><span class="p">))</span>
</pre></div>
</div>
<p>To read it again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;configspace.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
    <span class="n">json_string</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">restored_conf</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">json_string</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/Guide.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2014-2019, Matthias Feurer, Katharina Eggensperger, Syed Mohsin Ali, Christina Hernandez Wunsch, Julien-Charles Levesque, Jost Tobias Springenberg, Philipp Mueller, Marius Lindauer, Jorn Tuyls.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>